class App extends React.Component {

  constructor(props) {
    super(props);
    this.state = {

      board: [[0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0]],
      isFirstPlayer: true,
      winner: null

    };
    this.onClick = this.onClick.bind(this);
  }

  onClick(col) {

    var copyBoard = this.state.board.slice(0);
    var row = 0;
    for (var i = 0; i < copyBoard.length; i++) {
      if (copyBoard[i][col] === 0) {
        row = i;
      }
    }

    copyBoard[row][col] = this.state.isFirstPlayer ? 1 : -1;
    console.log(copyBoard);

    this.setState({
      board: copyBoard,
      isFirstPlayer: !this.state.isFirstPlayer
    });

    this.checkRows();
    this.checkCols();
    this.checkRightDiags();
    this.checkLeftDiags();
  }

  setWinner(square) {

    if (square === 1) {
      this.setState({
        winner: 'first player'
      });
    } else {
      this.setState({
        winner: 'second player'
      });
    }
  }

  checkRows() {

    var board = this.state.board;
    for (var i = 0; i < board.length; i++) {

      for (var c = 0; c < board[0].length - 3; c++) {
        var row = board[i];
        var square = row[c];
        if (square !== 0) {
          if (square === row[c + 1] && square === row[c + 2] && square === row[c + 3]) {
            this.setWinner(square);
          }
        }
      }
    }
  }

  checkCols() {

    var board = this.state.board;
    for (var c = 0; c < board[0].length; c++) {

      for (var r = board.length - 1; r > 2; r--) {
        var square = board[r][c];

        if (square !== 0) {
          if (square === board[r - 1][c] && square === board[r - 2][c] && square === board[r - 3][c]) {
            this.setWinner(square);
          }
        }
      }
    }
  }

  checkRightDiags() {

    var board = this.state.board;
    for (var r = 3; r < board.length; r++) {
      var row = board[r];
      for (var c = 0; c < board.length - 3; c++) {
        var square = row[c];
        if (square !== 0) {
          if (square === board[r - 1][c + 1] && square === board[r - 2][c + 2] && square === board[r - 3][c + 3]) {
            this.setWinner(square);
          }
        }
      }
    }
  }

  checkLeftDiags() {

    var board = this.state.board;
    for (var r = 0; r < board.length - 3; r++) {
      var row = board[r];
      for (var c = 0; c < board[0].length - 3; c++) {
        var square = row[c];
        if (square !== 0) {
          if (square === board[r + 1][c + 1] && square === board[r + 2][c + 2] && square === board[r + 3][c + 3]) {
            this.setWinner(square);
          }
        }
      }
    }
  }

  render() {

    return React.createElement(
      'div',
      null,
      React.createElement(
        'h1',
        null,
        'CONNECT 4 TO WIN'
      ),
      React.createElement(
        'table',
        null,
        React.createElement(
          'tbody',
          null,
          React.createElement(Headers, { data: [0, 1, 2, 3, 4, 5, 6], selectColumn: this.onClick }),
          this.state.board.map((row, index) => {
            return React.createElement(Row, { key: index, data: row, row: index, selectSquare: this.onClick });
          })
        )
      ),
      React.createElement(
        'div',
        null,
        this.state.winner ? React.createElement(
          'div',
          null,
          'Winner is ',
          this.state.winner,
          '!'
        ) : React.createElement('div', null)
      )
    );
  }
}

var Headers = ({ data, selectColumn }) => React.createElement(
  'tr',
  null,
  data.map((row, index) => {
    return React.createElement(
      'th',
      { key: index, onClick: () => {
          selectColumn(index);
        } },
      'v'
    );
  })
);

var Row = ({ data, row, selectSquare }) => React.createElement(
  'tr',
  null,
  data.map((square, index) => {

    if (square !== 0) {
      return React.createElement('td', { key: index, className: square === 1 ? 'yellow' : 'red' });
    } else {
      return React.createElement('td', { key: index });
    }
  })
);

window.App = App;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2FwcC5qc3giXSwibmFtZXMiOlsiQXBwIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwic3RhdGUiLCJib2FyZCIsImlzRmlyc3RQbGF5ZXIiLCJ3aW5uZXIiLCJvbkNsaWNrIiwiYmluZCIsImNvbCIsImNvcHlCb2FyZCIsInNsaWNlIiwicm93IiwiaSIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJzZXRTdGF0ZSIsImNoZWNrUm93cyIsImNoZWNrQ29scyIsImNoZWNrUmlnaHREaWFncyIsImNoZWNrTGVmdERpYWdzIiwic2V0V2lubmVyIiwic3F1YXJlIiwiYyIsInIiLCJyZW5kZXIiLCJtYXAiLCJpbmRleCIsIkhlYWRlcnMiLCJkYXRhIiwic2VsZWN0Q29sdW1uIiwiUm93Iiwic2VsZWN0U3F1YXJlIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxHQUFOLFNBQWtCQyxNQUFNQyxTQUF4QixDQUFrQzs7QUFFaENDLGNBQVlDLEtBQVosRUFBbUI7QUFDakIsVUFBTUEsS0FBTjtBQUNBLFNBQUtDLEtBQUwsR0FBYTs7QUFFVEMsYUFBTyxDQUFDLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLEVBQU8sQ0FBUCxFQUFTLENBQVQsRUFBVyxDQUFYLEVBQWEsQ0FBYixDQUFELEVBQWtCLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLEVBQU8sQ0FBUCxFQUFTLENBQVQsRUFBVyxDQUFYLEVBQWEsQ0FBYixDQUFsQixFQUFtQyxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVAsRUFBUyxDQUFULEVBQVcsQ0FBWCxFQUFhLENBQWIsQ0FBbkMsRUFBbUQsQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLEVBQVMsQ0FBVCxFQUFXLENBQVgsRUFBYSxDQUFiLENBQW5ELEVBQW9FLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLEVBQU8sQ0FBUCxF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QUE7QUFBQTtBQUdJRCxPQUFLSCxHQUFMLENBQVMsQ0FBQ2YsR0FBRCxFQUFNZ0IsS0FBTixLQUFnQjtBQUN2QixXQUFPO0FBQUE7QUFBQSxRQUFJLEtBQUtBLEtBQVQsRUFBZ0IsU0FBVSxNQUFLO0FBQUNHLHVCQUFhSCxLQUFiO0FBQW9CLFNBQXBEO0FBQUE7QUFBQSxLQUFQO0FBQ0QsR0FGRDtBQUhKLENBRkY7O0FBY0EsSUFBSUksTUFBTSxDQUFDLEVBQUNGLElBQUQsRUFBT2xCLEdBQVAsRUFBWXFCLFlBQVosRUFBRCxLQUVSO0FBQUE7QUFBQTtBQUVJSCxPQUFLSCxHQUFMLENBQVUsQ0FBQ0osTUFBRCxFQUFRSyxLQUFSLEtBQWtCOztBQUUxQixRQUFJTCxXQUFXLENBQWYsRUFBa0I7QUFDaEIsYUFBTyw0QkFBSSxLQUFLSyxLQUFULEVBQWdCLFdBQVlMLFdBQVMsQ0FBVixHQUFlLFFBQWYsR0FBeUIsS0FBcEQsR0FBUDtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU8sNEJBQUksS0FBS0ssS0FBVCxHQUFQO0FBRUQ7QUFDRixHQVJEO0FBRkosQ0FGRjs7QUFtQkFNLE9BQU9wQyxHQUFQLEdBQWFBLEdBQWIiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgXG4gICAgICAgIGJvYXJkOiBbWzAsMCwwLDAsMCwwLDBdLCBbMCwwLDAsMCwwLDAsMF0sIFswLDAsMCwwLDAsMCwwXSxbMCwwLDAsMCwwLDAsMF0sIFswLDAsMCwwLDAsMCwwXSwgWzAsMCwwLDAsMCwwLDBdXSxcbiAgICAgICAgaXNGaXJzdFBsYXllcjogdHJ1ZSxcbiAgICAgICAgd2lubmVyOiBudWxsXG4gICAgICBcbiAgICB9XG4gICAgdGhpcy5vbkNsaWNrID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XG5cbiAgfVxuXG4gIFxuICBvbkNsaWNrKGNvbCkge1xuICAgIFxuICAgIHZhciBjb3B5Qm9hcmQgPSAgdGhpcy5zdGF0ZS5ib2FyZC5zbGljZSgwKTtcbiAgICB2YXIgcm93ID0gMDtcbiAgICBmb3IgKHZhciBpPTA7IGk8Y29weUJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoY29weUJvYXJkW2ldW2NvbF0gPT09IDApIHtcbiAgICAgICAgcm93ID0gaTtcbiAgICAgIH1cbiAgICB9ICAgIFxuICBcbiAgICBjb3B5Qm9hcmRbcm93XVtjb2xdID0gdGhpcy5zdGF0ZS5pc0ZpcnN0UGxheWVyID8gMSA6IC0xO1xuICAgIGNvbnNvbGUubG9nKGNvcHlCb2FyZCk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGJvYXJkOiAgIGNvcHlCb2FyZCxcbiAgICAgIGlzRmlyc3RQbGF5ZXI6ICF0aGlzLnN0YXRlLmlzRmlyc3RQbGF5ZXJcbiAgICB9KTtcbiAgXG4gICAgdGhpcy5jaGVja1Jvd3MoKTtcbiAgICB0aGlzLmNoZWNrQ29scygpO1xuICAgIHRoaXMuY2hlY2tSaWdodERpYWdzKCk7XG4gICAgdGhpcy5jaGVja0xlZnREaWFncygpO1xuXG4gIH1cbiAgXG4gIHNldFdpbm5lcihzcXVhcmUpIHtcbiAgXG4gICBpZiAoc3F1YXJlID09PSAxKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHdpbm5lcjogJ2ZpcnN0IHBsYXllcidcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHdpbm5lcjogJ3NlY29uZCBwbGF5ZXInXG4gICAgICAgIH0pXG4gICAgfVxuXG4gIH1cblxuICBjaGVja1Jvd3MoKSB7XG4gICAgXG4gICAgdmFyIGJvYXJkID0gdGhpcy5zdGF0ZS5ib2FyZDtcbiAgICBmb3IgKHZhciBpPTA7IGk8Ym9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgIFxuICAgICAgZm9yICh2YXIgYz0wOyBjPGJvYXJkWzBdLmxlbmd0aC0zOyBjKyspIHtcbiAgICAgICAgdmFyIHJvdyA9IGJvYXJkW2ldO1xuICAgICAgICB2YXIgc3F1YXJlID0gcm93W2NdO1xuICAgICAgICBpZiAoc3F1YXJlICE9PSAwKSB7XG4gICAgICAgICAgaWYgKHNxdWFyZSA9PT0gcm93W2MrMV0gJiYgc3F1YXJlID09PSByb3dbYysyXSAmJiBzcXVhcmUgPT09IHJvd1tjKzNdKSB7XG4gICAgICAgICAgICB0aGlzLnNldFdpbm5lcihzcXVhcmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAgICAgIFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNoZWNrQ29scygpe1xuICBcbiAgICB2YXIgYm9hcmQgPSB0aGlzLnN0YXRlLmJvYXJkO1xuICAgIGZvciAodmFyIGM9MDsgYzxib2FyZFswXS5sZW5ndGg7IGMrKykge1xuXG4gICAgICBmb3IgKHZhciByPWJvYXJkLmxlbmd0aC0xOyByPjI7IHItLSkge1xuICAgICAgICB2YXIgc3F1YXJlID0gYm9hcmRbcl1bY107XG4gICAgICAgIFxuICAgICAgICBpZiAoc3F1YXJlICE9PSAwKSB7XG4gICAgICAgICAgaWYgKHNxdWFyZSA9PT0gYm9hcmRbci0xXVtjXSAmJiBzcXVhcmUgPT09IGJvYXJkW3ItMl1bY10gJiYgc3F1YXJlID09PSBib2FyZFtyLTNdW2NdKSB7XG4gICAgICAgICAgICB0aGlzLnNldFdpbm5lcihzcXVhcmUpO1xuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2hlY2tSaWdodERpYWdzKCl7XG4gICAgXG4gICAgICB2YXIgYm9hcmQgPSB0aGlzLnN0YXRlLmJvYXJkO1xuICAgICAgZm9yICh2YXIgcj0zOyByPGJvYXJkLmxlbmd0aDsgcisrKSB7XG4gICAgICAgIHZhciByb3cgPSBib2FyZFtyXTtcbiAgICAgICAgZm9yICh2YXIgYz0wOyBjPGJvYXJkLmxlbmd0aC0zOyBjKyspIHtcbiAgICAgICAgICB2YXIgc3F1YXJlID0gcm93W2NdO1xuICAgICAgICAgIGlmIChzcXVhcmUgIT09IDApIHtcbiAgICAgICAgICAgIGlmIChzcXVhcmUgPT09IGJvYXJkW3ItMV1bYysxXSAmJiBzcXVhcmUgPT09IGJvYXJkW3ItMl1bYysyXSAmJiBzcXVhcmUgPT09IGJvYXJkW3ItM11bYyszXSkge1xuICAgICAgICAgICAgICB0aGlzLnNldFdpbm5lcihzcXVhcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gIH1cblxuICBjaGVja0xlZnREaWFncygpIHtcbiAgXG4gICAgICB2YXIgYm9hcmQgPSB0aGlzLnN0YXRlLmJvYXJkO1xuICAgICAgZm9yICh2YXIgcj0wOyByPGJvYXJkLmxlbmd0aC0zOyByKyspIHtcbiAgICAgICAgdmFyIHJvdyA9IGJvYXJkW3JdO1xuICAgICAgICBmb3IgKHZhciBjPTA7IGM8Ym9hcmRbMF0ubGVuZ3RoLTM7IGMrKykge1xuICAgICAgICAgIHZhciBzcXVhcmUgPSByb3dbY107XG4gICAgICAgICAgaWYgKHNxdWFyZSAhPT0gMCkge1xuICAgICAgICAgICAgaWYgKHNxdWFyZSA9PT0gYm9hcmRbcisxXVtjKzFdICYmIHNxdWFyZSA9PT0gYm9hcmRbcisyXVtjKzJdICYmIHNxdWFyZSA9PT0gYm9hcmRbciszXVtjKzNdKXtcbiAgICAgICAgICAgICAgdGhpcy5zZXRXaW5uZXIoc3F1YXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9ICAgXG4gICAgICAgIH1cbiAgICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcblxuICAgIHJldHVybiAgKFxuXG4gICAgICA8ZGl2PlxuICAgICAgICA8aDE+Q09OTkVDVCA0IFRPIFdJTjwvaDE+XG4gICAgICBcbiAgICAgICAgPHRhYmxlPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICA8SGVhZGVycyBkYXRhPXtbMCwxLDIsMyw0LDUsNl19IHNlbGVjdENvbHVtbj17dGhpcy5vbkNsaWNrfSAvPiAgIFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYm9hcmQubWFwKChyb3csIGluZGV4KT0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIDxSb3cga2V5PXtpbmRleH0gZGF0YT17cm93fSByb3c9e2luZGV4fSBzZWxlY3RTcXVhcmU9e3RoaXMub25DbGlja30gLz5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+ICBcblxuICAgICAgICBcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7ICh0aGlzLnN0YXRlLndpbm5lcikgPyAoPGRpdj5XaW5uZXIgaXMge3RoaXMuc3RhdGUud2lubmVyfSE8L2Rpdj4pIDogIDxkaXY+PC9kaXY+fVxuICAgICAgICA8L2Rpdj5cblxuXG4gICAgICA8L2Rpdj5cblxuICAgICAgXG5cbiAgICApXG4gIH1cbn1cblxudmFyIEhlYWRlcnMgPSAoe2RhdGEsIHNlbGVjdENvbHVtbn0pID0+ICAoXG5cbiAgPHRyPlxuICAgIHtcbiAgICBcbiAgICAgIGRhdGEubWFwKChyb3csIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiA8dGgga2V5PXtpbmRleH0gb25DbGljaz17ICgpPT4ge3NlbGVjdENvbHVtbihpbmRleCl9fT52PC90aD5cbiAgICAgIH0pXG4gICAgICBcbiAgICB9XG4gIDwvdHI+XG5cbilcblxudmFyIFJvdyA9ICh7ZGF0YSwgcm93LCBzZWxlY3RTcXVhcmV9KSA9PiAoXG5cbiAgPHRyPlxuICAgIHtcbiAgICAgIGRhdGEubWFwKCAoc3F1YXJlLGluZGV4KSA9PiB7XG5cbiAgICAgICAgaWYgKHNxdWFyZSAhPT0gMCkge1xuICAgICAgICAgIHJldHVybiA8dGQga2V5PXtpbmRleH0gY2xhc3NOYW1lPXsoc3F1YXJlPT09MSkgPyAneWVsbG93JzogJ3JlZCd9PjwvdGQ+XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIDx0ZCBrZXk9e2luZGV4fT48L3RkPlxuXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICA8L3RyPlxuXG4pXG5cblxud2luZG93LkFwcCA9IEFwcDtcbiJdfQ==